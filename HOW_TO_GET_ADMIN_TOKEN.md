# üîë –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

## üìã –ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞?

**–¢–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞** ‚Äî —ç—Ç–æ JWT —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–¥–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram. –û–Ω –Ω—É–∂–µ–Ω –¥–ª—è:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ —á–µ—Ä–µ–∑ API
- ‚úÖ –î–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–§–æ—Ä–º–∞—Ç:** –î–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –≤–∏–¥–∞ `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`

---

## üéØ –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **`https://optmramor.ru/admin`**
   - ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –û—Ç–∫—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ Telegram WebApp –∏–ª–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –≥–¥–µ –≤—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –≤ Telegram

### –®–∞–≥ 2: –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Telegram

1. –ï—Å–ª–∏ –≤—ã –µ—â–µ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã, –≤–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Telegram
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à Telegram ID –≤ —Å–ø–∏—Å–∫–µ `ADMIN_WHITELIST` –≤ `.env.production`

### –®–∞–≥ 3: –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –∏–∑ localStorage

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:
   - **Chrome/Edge:** `F12` –∏–ª–∏ `Ctrl+Shift+I` (Windows) / `Cmd+Option+I` (Mac)
   - **Firefox:** `F12` –∏–ª–∏ `Ctrl+Shift+K` (Windows) / `Cmd+Option+K` (Mac)
   - **Safari:** `Cmd+Option+I` (–Ω—É–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å Developer menu –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö)

2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Console**

3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:
   ```javascript
   localStorage.getItem('authToken')
   ```

4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω (–¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)

### –®–∞–≥ 4: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–∫–µ–Ω

–í—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω –≤ —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤:
```bash
./create-products-on-server.sh
# –í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω, –∫–æ–≥–¥–∞ —Å–∫—Ä–∏–ø—Ç –ø–æ–ø—Ä–æ—Å–∏—Ç
```

---

## üîß –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ API (–µ—Å–ª–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞)

### –í–∞—Ä–∏–∞–Ω—Ç A: –ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å Telegram initData

```bash
curl -X POST https://optmramor.ru/api/auth/validate \
  -H "Content-Type: application/json" \
  -d '{"initData": "–í–ê–®_TELEGRAM_INIT_DATA"}'
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "accessToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": { ... }
}
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `accessToken` –∏–∑ –æ—Ç–≤–µ—Ç–∞.

### –í–∞—Ä–∏–∞–Ω—Ç B: –ï—Å–ª–∏ –≤—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (—Ç–æ–ª—å–∫–æ –¥–ª—è development)

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** –≠—Ç–æ—Ç —Å–ø–æ—Å–æ–± —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏!

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ (development)
curl http://localhost:3000/api/auth/dev-token?telegramId=–í–ê–®_TELEGRAM_ID
```

**–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —ç—Ç–æ—Ç endpoint –æ—Ç–∫–ª—é—á–µ–Ω!**

---

## üì± –ö–∞–∫ —É–∑–Ω–∞—Ç—å —Å–≤–æ–π Telegram ID

–ï—Å–ª–∏ –≤—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ —Å–≤–æ–π Telegram ID:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ [@userinfobot](https://t.me/userinfobot)
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
4. –ë–æ—Ç –ø–æ–∫–∞–∂–µ—Ç –≤–∞—à ID (—á–∏—Å–ª–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä: `83146995`)

–≠—Ç–æ—Ç ID –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ `ADMIN_WHITELIST` –≤ `.env.production`:
```env
ADMIN_WHITELIST=83146995
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
curl -H "Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù" \
  https://optmramor.ru/api/admin/products
```

–ï—Å–ª–∏ –ø–æ–ª—É—á–∏–ª–∏ —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ (–∏–ª–∏ –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤) ‚Äî —Ç–æ–∫–µ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç! ‚úÖ

–ï—Å–ª–∏ –ø–æ–ª—É—á–∏–ª–∏ –æ—à–∏–±–∫—É `401 Unauthorized` ‚Äî —Ç–æ–∫–µ–Ω –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –∏–ª–∏ –∏—Å—Ç–µ–∫. ‚ùå

---

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

–¢–æ–∫–µ–Ω –º–æ–∂–µ—Ç –∏—Å—Ç–µ—á—å (–æ–±—ã—á–Ω–æ —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π). –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∑–∞–Ω–æ–≤–æ
2. –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ `localStorage.getItem('authToken')`

---

## üéØ –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

1. **–û—Ç–∫—Ä–æ–π—Ç–µ:** `https://optmramor.ru/admin`
2. **–í–æ–π–¥–∏—Ç–µ** —á–µ—Ä–µ–∑ Telegram
3. **–ù–∞–∂–º–∏—Ç–µ F12** ‚Üí –≤–∫–ª–∞–¥–∫–∞ Console
4. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ:** `localStorage.getItem('authToken')`
5. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ** —Ç–æ–∫–µ–Ω
6. **–í—Å—Ç–∞–≤—å—Ç–µ** –≤ —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤

---

## üí° –°–æ–≤–µ—Ç—ã

- ‚úÖ –¢–æ–∫–µ–Ω –¥–ª–∏–Ω–Ω—ã–π (–æ–±—ã—á–Ω–æ 200+ —Å–∏–º–≤–æ–ª–æ–≤) ‚Äî —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é
- ‚úÖ –ù–µ –¥–µ–ª–∏—Ç–µ—Å—å —Ç–æ–∫–µ–Ω–æ–º ‚Äî —ç—Ç–æ –≤–∞—à –ª–∏—á–Ω—ã–π –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –ø–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à Telegram ID –≤ `ADMIN_WHITELIST`

---

## üêõ –ü—Ä–æ–±–ª–µ–º—ã?

### "Token is invalid or expired"

**–†–µ—à–µ–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

### "Admin access required"

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à Telegram ID –≤ `ADMIN_WHITELIST`:
```env
ADMIN_WHITELIST=83146995
```

### "Cannot read property 'getItem' of null"

**–†–µ—à–µ–Ω–∏–µ:** 
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- –¢–æ–∫–µ–Ω ‚Äî —ç—Ç–æ JWT (JSON Web Token)
- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: –æ–±—ã—á–Ω–æ 7 –¥–Ω–µ–π (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `JWT_EXPIRES_IN`)
- –§–æ—Ä–º–∞—Ç: `Bearer <token>` –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization`

