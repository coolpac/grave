# üì± –ò—Ç–æ–≥–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Python –±–æ—Ç–∞–º–∏

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –£–¥–∞–ª–µ–Ω Node.js Telegram —Å–µ—Ä–≤–∏—Å
- –£–¥–∞–ª–µ–Ω `TelegramNotificationService` –Ω–∞ –æ—Å–Ω–æ–≤–µ `node-telegram-bot-api`
- –£–¥–∞–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ `node-telegram-bot-api` –∏ `@types/node-telegram-bot-api`

### 2. –°–æ–∑–¥–∞–Ω —É–ª—É—á—à–µ–Ω–Ω—ã–π HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è Python –±–æ—Ç–æ–≤
- **`TelegramBotClientService`** - —Å–µ—Ä–≤–∏—Å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Python –±–æ—Ç–∞–º–∏ —á–µ—Ä–µ–∑ HTTP
- Health checks –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–∫–∞—Ö (3 –ø–æ–ø—ã—Ç–∫–∏ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤ (5 —Å–µ–∫—É–Ω–¥)
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (403 - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –±–æ—Ç–∞, 4xx - –Ω–µ –ø–æ–≤—Ç–æ—Ä—è–µ–º, 5xx - –ø–æ–≤—Ç–æ—Ä—è–µ–º)

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ Python –±–æ—Ç–∞–º–∏
- **Customer Bot** (`bots/customer_bot.py`) - –ø–æ—Ä—Ç 8001
- **Admin Bot** (`bots/admin_bot.py`) - –ø–æ—Ä—Ç 8002
- –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –±–æ—Ç–æ–≤

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω `TELEGRAM_NOTIFICATIONS_SETUP.md` —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ —Ä–∞–±–æ—Ç–µ —Å Python –±–æ—Ç–∞–º–∏
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –û–ø–∏—Å–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ retry –ª–æ–≥–∏–∫–∞

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Python –±–æ—Ç–æ–≤

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏** - –±–æ—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
2. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –±–æ—Ç—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö
3. **–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å** - –ø–∞–¥–µ–Ω–∏–µ –±–æ—Ç–æ–≤ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–µ API
4. **–ì–∏–±–∫–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ Python –±–æ—Ç–∞—Ö –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è NestJS –∫–æ–¥–∞
5. **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –æ—Ç–ª–∞–¥–∫–∏** - –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–æ—Ç—ã –æ—Ç–¥–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ HTTP –∑–∞–ø—Ä–æ—Å—ã

## üìã –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è API (`apps/api/.env`):

```env
CUSTOMER_BOT_API_URL=http://localhost:8001
ADMIN_BOT_API_URL=http://localhost:8002
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –±–æ—Ç–æ–≤ (`bots/.env`):

```env
# Customer Bot
CUSTOMER_BOT_TOKEN=your_customer_bot_token
PORT=8001

# Admin Bot
ADMIN_BOT_TOKEN=your_admin_bot_token
ADMIN_CHAT_ID=your_telegram_chat_id
PORT=8002
```

## üöÄ –ó–∞–ø—É—Å–∫

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Python –±–æ—Ç—ã
cd bots
./start_bots.sh

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å NestJS API
cd apps/api
pnpm start:dev
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –±–æ—Ç–æ–≤
curl http://localhost:8001/health
curl http://localhost:8002/health

# –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ API –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:
# [TelegramBotClientService] Customer Bot is available at http://localhost:8001
# [TelegramBotClientService] Admin Bot is available at http://localhost:8002
```

## üìù API –º–µ—Ç–æ–¥—ã

### `notifyAdminNewOrder(orderData)` 
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –æ –Ω–æ–≤–æ–º –∑–∞–∫–∞–∑–µ —á–µ—Ä–µ–∑ Admin Bot

### `notifyCustomerNewOrder(telegramId, orderData)`
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É –æ –Ω–æ–≤–æ–º –∑–∞–∫–∞–∑–µ —á–µ—Ä–µ–∑ Customer Bot

### `notifyAdminOrderStatusChange(orderNumber, oldStatus, newStatus, customerName?)`
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

### `notifyCustomerOrderStatusChange(telegramId, orderNumber, status)`
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞

### `checkBotsAvailability()`
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –æ–±–æ–∏—Ö –±–æ—Ç–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å

## ‚ö° –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- **–ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- **Graceful degradation** - –µ—Å–ª–∏ –±–æ—Ç—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã, –∑–∞–∫–∞–∑ –≤—Å–µ —Ä–∞–≤–Ω–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è
- **Retry –ª–æ–≥–∏–∫–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–≤—Ç–æ—Ä—ã –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ—è—Ö
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

