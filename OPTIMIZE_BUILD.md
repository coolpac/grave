# ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

## –ü—Ä–æ–±–ª–µ–º–∞: –î–æ–ª–≥–∞—è —Å–±–æ—Ä–∫–∞

–ü–µ—Ä–≤–∞—è —Å–±–æ—Ä–∫–∞ –≤—Å–µ–≥–¥–∞ –¥–æ–ª–≥–∞—è, –ø–æ—Ç–æ–º—É —á—Ç–æ:
1. –°–∫–∞—á–∏–≤–∞—é—Ç—Å—è –≤—Å–µ Docker –æ–±—Ä–∞–∑—ã
2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
3. –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è TypeScript
4. –°–æ–±–∏—Ä–∞–µ—Ç—Å—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –°–æ–±—Ä–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å (—Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π)

**–ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:**

```bash
# 1. –°–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑—ã –ª–æ–∫–∞–ª—å–Ω–æ
docker build -t ritual-api:latest -f apps/api/Dockerfile .
docker build -t ritual-web:latest -f apps/web/Dockerfile .

# 2. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ —Ñ–∞–π–ª—ã
docker save ritual-api:latest | gzip > ritual-api.tar.gz
docker save ritual-web:latest | gzip > ritual-web.tar.gz

# 3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp ritual-api.tar.gz ritual-web.tar.gz root@94.241.141.194:/tmp/

# 4. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –æ–±—Ä–∞–∑—ã
ssh root@94.241.141.194
docker load < /tmp/ritual-api.tar.gz
docker load < /tmp/ritual-web.tar.gz

# 5. –û–±–Ω–æ–≤–∏—Ç–µ docker-compose —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –æ–±—Ä–∞–∑—ã
cd /opt/ritual-app
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ docker-compose.production.yml:
# –ó–∞–º–µ–Ω–∏—Ç–µ build: –Ω–∞ image: ritual-api:latest –∏ ritual-web:latest
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker BuildKit –∫—ç—à

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
# –í–∫–ª—é—á–∏—Ç–µ BuildKit
export DOCKER_BUILDKIT=1
export COMPOSE_DOCKER_CLI_BUILD=1

# –°–æ–±–µ—Ä–∏—Ç–µ —Å –∫—ç—à–µ–º
cd /opt/ritual-app
docker-compose -f docker-compose.production.yml build
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –°–æ–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ API (–µ—Å–ª–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —É–∂–µ —Å–æ–±—Ä–∞–Ω)

–ï—Å–ª–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è, –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ API:

```bash
cd /opt/ritual-app
docker-compose -f docker-compose.production.yml build api
docker-compose -f docker-compose.production.yml up -d
```

### –í–∞—Ä–∏–∞–Ω—Ç 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å .dockerignore –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.dockerignore` –∏—Å–∫–ª—é—á–∞–µ—Ç –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã:

```dockerignore
node_modules
.git
*.log
.env
.env.local
dist
coverage
```

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥

**–î–ª—è –ø–µ—Ä–≤–æ–≥–æ –¥–µ–ø–ª–æ—è:**
1. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏ TypeScript (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ)
2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏ (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞)
3. –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å–±–æ—Ä–∫–∏ –±—É–¥—É—Ç –±—ã—Å—Ç—Ä–µ–µ –±–ª–∞–≥–æ–¥–∞—Ä—è –∫—ç—à—É

**–î–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –¥–µ–ø–ª–æ–µ–≤:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `docker-compose build --no-cache` —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ
- –û–±—ã—á–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ `docker-compose build` - –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à

## ‚è±Ô∏è –û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏

- **–ü–µ—Ä–≤–∞—è —Å–±–æ—Ä–∫–∞:** 5-15 –º–∏–Ω—É—Ç (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)
- **–ü–æ—Å–ª–µ–¥—É—é—â–∏–µ —Å–±–æ—Ä–∫–∏:** 1-3 –º–∏–Ω—É—Ç—ã (—Å –∫—ç—à–µ–º)
- **–¢–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:** 30 —Å–µ–∫—É–Ω–¥ - 1 –º–∏–Ω—É—Ç–∞

## üí° –°–æ–≤–µ—Ç

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏, –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –±—É–¥—É—Ç –Ω–∞–º–Ω–æ–≥–æ –±—ã—Å—Ç—Ä–µ–µ –±–ª–∞–≥–æ–¥–∞—Ä—è Docker –∫—ç—à—É!

