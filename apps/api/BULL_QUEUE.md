# üîÑ Bull Queue - Background Jobs

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–∏—Å—Ç–µ–º–µ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á —Å Bull Queue.

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä](#–æ–±–∑–æ—Ä)
2. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
3. [–û—á–µ—Ä–µ–¥–∏](#–æ—á–µ—Ä–µ–¥–∏)
4. [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)
5. [Bull Board](#bull-board)
6. [Graceful Shutdown](#graceful-shutdown)
7. [Cron Jobs](#cron-jobs)
8. [Troubleshooting](#troubleshooting)

---

## üéØ –û–±–∑–æ—Ä

Bull Queue –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç—è–∂–µ–ª—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ:

- **Email Queue** - –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (Telegram, email)
- **Image Queue** - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (resize, thumbnail, optimize)
- **Reports Queue** - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ (sales, orders, products)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç HTTP –∑–∞–ø—Ä–æ—Å—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ retry –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ Bull Board
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Redis** - –û–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã Bull Queue
- **Node.js** - v18+

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# Redis (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
REDIS_URL=redis://:password@localhost:6379
# –∏–ª–∏
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_password
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Redis
redis-cli ping
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: PONG
```

---

## üì¨ –û—á–µ—Ä–µ–¥–∏

### Telegram Notification Queue

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç–ø—Ä–∞–≤–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–∞–∫–∞–∑–∞—Ö, –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö —Å—Ç–∞—Ç—É—Å–∞, –±—Ä–æ—à–µ–Ω–Ω—ã—Ö –∫–æ—Ä–∑–∏–Ω–∞—Ö —á–µ—Ä–µ–∑ Python –±–æ—Ç—ã.

**–¢–∏–ø—ã –∑–∞–¥–∞—á:**
- `order_created` - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞
- `order_status_changed` - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
- `cart_abandoned` - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –±—Ä–æ—à–µ–Ω–Ω–æ–π –∫–æ—Ä–∑–∏–Ω–µ
- `custom` - –ö–∞—Å—Ç–æ–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–ü–æ–ª—É—á–∞—Ç–µ–ª–∏:**
- `customer` - –¢–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç—É (—Ç—Ä–µ–±—É–µ—Ç—Å—è telegramId)
- `admin` - –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
- `both` - –ò –∫–ª–∏–µ–Ω—Ç—É, –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:**
- `high` - –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (10)
- `normal` - –û–±—ã—á–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (5)
- `low` - –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (1)

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```typescript
import { TelegramNotificationQueue } from '../queue/queues/telegram-notification.queue';

constructor(private readonly telegramNotificationQueue: TelegramNotificationQueue) {}

// –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É –≤ –æ—á–µ—Ä–µ–¥—å
await this.telegramNotificationQueue.addNotificationJob({
  type: 'order_created',
  recipient: 'both', // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏ –∞–¥–º–∏–Ω—É, –∏ –∫–ª–∏–µ–Ω—Ç—É
  telegramId: '123456789', // Telegram ID –∫–ª–∏–µ–Ω—Ç–∞
  data: {
    orderId: 123,
    orderNumber: 'ORD-123',
    total: 5000,
    customerName: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
    items: [...],
  },
  priority: 'high',
});
```

---

### Image Queue

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–≤—å—é, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, resize).

**–¢–∏–ø—ã –∑–∞–¥–∞—á:**
- `thumbnail` - –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–Ω–∏–∞—Ç—é—Ä—ã (300x300)
- `resize` - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞
- `optimize` - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `watermark` - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ–¥—è–Ω–æ–≥–æ –∑–Ω–∞–∫–∞

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```typescript
import { ImageQueue } from '../queue/queues/image.queue';

constructor(private readonly imageQueue: ImageQueue) {}

// –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
await this.imageQueue.addImageJob({
  type: 'thumbnail',
  filePath: '/path/to/image.jpg',
  fileUrl: 'https://example.com/image.jpg',
  productId: 123,
  mediaId: 456,
  options: {
    width: 300,
    height: 300,
    quality: 80,
  },
});
```

---

### Reports Queue

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç—á–µ—Ç–æ–≤.

**–¢–∏–ø—ã –æ—Ç—á–µ—Ç–æ–≤:**
- `sales` - –û—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º
- `orders` - –û—Ç—á–µ—Ç –ø–æ –∑–∞–∫–∞–∑–∞–º
- `products` - –û—Ç—á–µ—Ç –ø–æ —Ç–æ–≤–∞—Ä–∞–º
- `customers` - –û—Ç—á–µ—Ç –ø–æ –∫–ª–∏–µ–Ω—Ç–∞–º

**–§–æ—Ä–º–∞—Ç—ã:**
- `json` - JSON —Ñ–æ—Ä–º–∞—Ç
- `csv` - CSV —Ñ–æ—Ä–º–∞—Ç
- `excel` - Excel —Ñ–∞–π–ª
- `pdf` - PDF –¥–æ–∫—É–º–µ–Ω—Ç

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```typescript
import { ReportsQueue } from '../queue/queues/reports.queue';

constructor(private readonly reportsQueue: ReportsQueue) {}

// –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞
await this.reportsQueue.addReportJob({
  type: 'sales',
  format: 'pdf',
  period: {
    start: new Date('2024-01-01'),
    end: new Date('2024-12-31'),
  },
  userId: 123,
  emailTo: 'admin@example.com',
});
```

---

## üíª –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ –æ—á–µ—Ä–µ–¥—å

```typescript
// Telegram notification
await this.telegramNotificationQueue.addNotificationJob(
  {
    type: 'order_created',
    recipient: 'both',
    telegramId: '123456789',
    data: orderData,
    priority: 'high',
  },
  {
    delay: 0, // –ë–µ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏
  },
);

// Image processing
await this.imageQueue.addImageJob(data, {
  priority: 5,
  delay: 1000, // –ó–∞–¥–µ—Ä–∂–∫–∞ 1 —Å–µ–∫—É–Ω–¥–∞
});

// Report generation
await this.reportsQueue.addReportJob(data, {
  priority: 1, // –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
  delay: 0,
});
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ—á–µ—Ä–µ–¥–∏

```typescript
const stats = await this.telegramNotificationQueue.getStats();
// {
//   waiting: 5,
//   active: 2,
//   completed: 100,
//   failed: 3,
//   delayed: 1,
//   total: 111
// }
```

---

## üìä Bull Board

Bull Board –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—á–µ—Ä–µ–¥–µ–π.

### –î–æ—Å—Ç—É–ø

**URL:** http://localhost:3000/admin/queues

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (JWT —Ç–æ–∫–µ–Ω —Å –ø—Ä–∞–≤–∞–º–∏ admin)

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –æ—á–µ—Ä–µ–¥–µ–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∑–∞–¥–∞—á–∞–º (waiting, active, completed, failed)
- –î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á
- Retry failed jobs
- –û—á–∏—Å—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–µ–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É

### API Endpoints

- `GET /admin/queues/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö –æ—á–µ—Ä–µ–¥–µ–π

---

## üõë Graceful Shutdown

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å –æ—á–µ—Ä–µ–¥—è–º–∏:

1. –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á (–¥–æ 5 —Å–µ–∫—É–Ω–¥ –Ω–∞ –æ—á–µ—Ä–µ–¥—å)
2. –ó–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å Redis
3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞

**–¢–∞–π–º–∞—É—Ç:** 10 —Å–µ–∫—É–Ω–¥ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `SHUTDOWN_TIMEOUT`)

---

## ‚è∞ Cron Jobs

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é:

### –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–¥–∞—á

**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:** –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 2:00 AM

```typescript
@Cron('0 2 * * *')
async cleanupOldJobs()
```

### Retry failed jobs

**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:** –ö–∞–∂–¥—ã–π —á–∞—Å

```typescript
@Cron(CronExpression.EVERY_HOUR)
async retryFailedJobs()
```

### –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –±—Ä–æ—à–µ–Ω–Ω—ã—Ö –∫–æ—Ä–∑–∏–Ω–∞—Ö

**–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:** –ö–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤

```typescript
@Cron('0 */6 * * *')
async sendCartAbandonmentReminders()
```

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—á–µ—Ä–µ–¥–µ–π

–§–∞–π–ª: `src/queue/queue.config.ts`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `removeOnComplete` - –•—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á (1 —á–∞—Å, –º–∞–∫—Å. 1000)
- `removeOnFail` - –•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –∑–∞–¥–∞—á (24 —á–∞—Å–∞, –º–∞–∫—Å. 5000)
- `attempts` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ (3)
- `backoff` - –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–≤—Ç–æ—Ä–∞ (exponential, 2 —Å–µ–∫—É–Ω–¥—ã)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ concurrency

–í processors –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É:

```typescript
@Process({
  name: 'order-notification',
  concurrency: 5, // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–æ 5 –∑–∞–¥–∞—á –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
})
```

---

## üö® Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –û—á–µ—Ä–µ–¥–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–ü—Ä–∏—á–∏–Ω–∞:** Redis –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: `redis-cli ping`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: `REDIS_URL` –∏–ª–∏ `REDIS_HOST`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker logs ritual_redis`

---

### –ü—Ä–æ–±–ª–µ–º–∞: –ó–∞–¥–∞—á–∏ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** Processors –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `QueueModule` –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ `AppModule`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ processors –ø–æ–º–µ—á–µ–Ω—ã –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–æ–º `@Processor`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏

---

### –ü—Ä–æ–±–ª–µ–º–∞: –ó–∞–¥–∞—á–∏ –ø–∞–¥–∞—é—Ç —Å –æ—à–∏–±–∫–æ–π

**–ü—Ä–∏—á–∏–Ω–∞:** –û—à–∏–±–∫–∞ –≤ processor

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ processor
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Bull Board –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –æ—à–∏–±–∫–∏
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ retry –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–≤—Ç–æ—Ä–∞

---

### –ü—Ä–æ–±–ª–µ–º–∞: Bull Board –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ JWT —Ç–æ–∫–µ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `ADMIN_WHITELIST` –≤ `.env`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `AdminGuard` –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Bull Queue Documentation](https://github.com/OptimalBits/bull)
- [NestJS Bull Module](https://docs.nestjs.com/techniques/queues)
- [Bull Board](https://github.com/felixmosh/bull-board)

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Redis

–ï—Å–ª–∏ Redis –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Redis:**
   ```bash
   # Docker
   docker run -d -p 6379:6379 redis:7-alpine
   
   # macOS
   brew install redis
   brew services start redis
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```env
   REDIS_URL=redis://localhost:6379
   ```

3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**

---

## üì± –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram –±–æ—Ç–∞–º–∏

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Python –±–æ—Ç—ã –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:

- **Customer Bot** (`CUSTOMER_BOT_API_URL`) - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞–º
- **Admin Bot** (`ADMIN_BOT_API_URL`) - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
NestJS API ‚Üí Bull Queue ‚Üí TelegramNotificationProcessor ‚Üí Python Bots ‚Üí Telegram
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- –ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –±–æ—Ç–æ–≤ (–æ—á–µ—Ä–µ–¥—å –±—É—Ñ–µ—Ä–∏–∑—É–µ—Ç –∑–∞–¥–∞—á–∏)

---

**–§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ - –∫–ª—é—á –∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è! üîÑ**

