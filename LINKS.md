# üîó –°—Å—ã–ª–∫–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

## üë• –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üåê –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:**
```
https://optmramor.ru
```

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤:**
```
https://optmramor.ru/materials/marble    # –ú—Ä–∞–º–æ—Ä
https://optmramor.ru/materials/granite   # –ì—Ä–∞–Ω–∏—Ç
```

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤:**
```
https://optmramor.ru/c/marble-slabs           # –ü–ª–∏—Ç—ã –º—Ä–∞–º–æ—Ä–Ω—ã–µ
https://optmramor.ru/c/marble-chips           # –ú—Ä–∞–º–æ—Ä–Ω–∞—è –∫—Ä–æ—à–∫–∞
https://optmramor.ru/c/marble-vases            # –í–∞–∑—ã –º—Ä–∞–º–æ—Ä–Ω—ã–µ
https://optmramor.ru/c/ritual-steles           # –°—Ç–µ–ª—ã —Ä–∏—Ç—É–∞–ª—å–Ω—ã–µ
https://optmramor.ru/c/ritual-pedestals        # –¢—É–º–±—ã —Ä–∏—Ç—É–∞–ª—å–Ω—ã–µ
https://optmramor.ru/c/ritual-flowerbeds       # –¶–≤–µ—Ç–Ω–∏–∫–∏ —Ä–∏—Ç—É–∞–ª—å–Ω—ã–µ
https://optmramor.ru/c/ritual-sets             # –ö–æ–º–ø–ª–µ–∫—Ç—ã —Ä–∏—Ç—É–∞–ª—å–Ω—ã–µ
```

**–ö–æ—Ä–∑–∏–Ω–∞ –∏ –∑–∞–∫–∞–∑—ã:**
```
https://optmramor.ru/cart                      # –ö–æ—Ä–∑–∏–Ω–∞
https://optmramor.ru/checkout                  # –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
https://optmramor.ru/orders                     # –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤
```

**–¢–æ–≤–∞—Ä (–ø—Ä–∏–º–µ—Ä):**
```
https://optmramor.ru/p/plita-mramornaya-polirovannaya
```

---

## üë®‚Äçüíº –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

### üéõÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

**–í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:**
```
https://optmramor.ru/admin
```

**–†–∞–∑–¥–µ–ª—ã –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:**
```
https://optmramor.ru/admin/                    # –î–∞—à–±–æ—Ä–¥
https://optmramor.ru/admin/products            # –¢–æ–≤–∞—Ä—ã
https://optmramor.ru/admin/products/new        # –°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä
https://optmramor.ru/admin/banners             # –ë–∞–Ω–Ω–µ—Ä—ã
https://optmramor.ru/admin/newsletters          # –†–∞—Å—Å—ã–ª–∫–∏
https://optmramor.ru/admin/abandoned-carts      # –ë—Ä–æ—à–µ–Ω–Ω—ã–µ –∫–æ—Ä–∑–∏–Ω—ã
```

**–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞:**
```
http://localhost:5174                          # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (dev)
http://localhost:5173                          # –ú–∞–≥–∞–∑–∏–Ω (dev)
```

---

### üîë –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

#### –°–ø–æ—Å–æ–± 1: –° —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π)

**–£–∑–Ω–∞–π—Ç–µ —Å–≤–æ–π Telegram ID:**
```
https://t.me/userinfobot
```
–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å –≤–∞—à ID.

**–ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω:**
```
https://optmramor.ru/api/auth/admin-token?telegramId=–í–ê–®_TELEGRAM_ID
```

**–ü—Ä–∏–º–µ—Ä:**
```
https://optmramor.ru/api/auth/admin-token?telegramId=83146995
```

#### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram WebApp
2. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Telegram
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console)
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ: `localStorage.getItem('authToken')`
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω

#### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ API —Å initData

```bash
curl -X POST https://optmramor.ru/api/auth/admin-token \
  -H "Content-Type: application/json" \
  -d '{"initData": "–í–ê–®_TELEGRAM_INIT_DATA"}'
```

---

### üîß API Endpoints –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

**–ë–∞–∑–∞ URL:** `https://optmramor.ru/api`

#### –¢–æ–≤–∞—Ä—ã

```bash
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã
GET /api/products
Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù

# –°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä
POST /api/products
Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù
Content-Type: application/json

# –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
PUT /api/products/:id
Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù

# –£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä
DELETE /api/products/:id
Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù
```

#### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏

```bash
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
GET /api/catalog/categories
Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù

# –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
POST /api/catalog/categories
Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù
```

#### –ó–∞–∫–∞–∑—ã

```bash
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–∫–∞–∑—ã
GET /api/admin/orders
Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù

# –ü–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑ –ø–æ ID
GET /api/admin/orders/:id
Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù

# –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞
PATCH /api/admin/orders/:id/status
Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù
```

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

```bash
# –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
GET /api/admin/users
Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù
```

---

### üìä –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤

**Health Check:**
```
https://optmramor.ru/api/health/live
https://optmramor.ru/api/health/ready
```

**–ú–µ—Ç—Ä–∏–∫–∏ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã):**
```
https://optmramor.ru/api/metrics
```

**API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (Swagger, –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω):**
```
https://optmramor.ru/api/docs
```

---

## üõ†Ô∏è –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

**Frontend:**
```
http://localhost:5173
```

**API:**
```
http://localhost:3000/api
```

**Health Check:**
```
http://localhost:3000/api/health/live
```

**Dev Token (—Ç–æ–ª—å–∫–æ –≤ development):**
```
http://localhost:3000/api/auth/dev-token?telegramId=–í–ê–®_ID
```

---

## üì± Telegram –±–æ—Ç—ã

**–ü–æ–ª–µ–∑–Ω—ã–µ –±–æ—Ç—ã:**
```
@BotFather          # –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞–º–∏
@userinfobot         # –£–∑–Ω–∞—Ç—å —Å–≤–æ–π Telegram ID
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–í–∞–∂–Ω–æ:**
- ‚úÖ –ù–µ –¥–µ–ª–∏—Ç–µ—Å—å —Ç–æ–∫–µ–Ω–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- ‚úÖ –¢–æ–∫–µ–Ω—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã 7 –¥–Ω–µ–π (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `JWT_EXPIRES_IN`)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –•—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ

---

## üìù –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ 83146995 –Ω–∞ –≤–∞—à Telegram ID
curl "https://optmramor.ru/api/auth/admin-token?telegramId=83146995"
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ –í–ê–®_–¢–û–ö–ï–ù –Ω–∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω
curl -H "Authorization: Bearer –í–ê–®_–¢–û–ö–ï–ù" \
  https://optmramor.ru/api/admin/products
```

### –°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä—ã

```bash
./create-products-on-server.sh
# –í–≤–µ–¥–∏—Ç–µ —Ç–æ–∫–µ–Ω, –∫–æ–≥–¥–∞ —Å–∫—Ä–∏–ø—Ç –ø–æ–ø—Ä–æ—Å–∏—Ç
```

---

## üåç –î–æ–º–µ–Ω—ã –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Production:**
- Frontend: `https://optmramor.ru`
- API: `https://optmramor.ru/api`
- IP: `94.241.141.194`

**Development (–ª–æ–∫–∞–ª—å–Ω–æ):**
- Frontend: `http://localhost:5173`
- API: `http://localhost:3000/api`

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `HOW_TO_GET_ADMIN_TOKEN_UPDATED.md` - –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `CHANGES_SUMMARY.md` - –°–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `FIX_ENV_AND_PRODUCTS.md` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ .env –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
- `DEPLOYMENT_QUICK_START.md` - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–µ–ø–ª–æ—è

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

1. **–ó–∞–∫–ª–∞–¥–∫–∏:** –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å—Å—ã–ª–∫—É –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –≤ –∑–∞–∫–ª–∞–¥–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞
2. **–°–∫—Ä–∏–ø—Ç—ã:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
3. **–õ–æ–≥–∏:** –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ API –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:
   ```bash
   ssh root@94.241.141.194 "cd /opt/ritual-app && docker-compose -f docker-compose.production.yml logs api"
   ```

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-01-21

