# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã Docker Hub Rate Limit

## –ü—Ä–æ–±–ª–µ–º–∞
```
429 Too Many Requests
toomanyrequests: You have reached your unauthenticated pull rate limit.
```

Docker Hub –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 1: –ü–æ–¥–æ–∂–¥–∞—Ç—å (—Å–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ)

–õ–∏–º–∏—Ç —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è (–æ–±—ã—á–Ω–æ 6 —á–∞—Å–æ–≤). –ü—Ä–æ—Å—Ç–æ –ø–æ–¥–æ–∂–¥–∏—Ç–µ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞:

```bash
./deploy.sh production
```

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 2: –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –≤ Docker Hub (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
ssh root@94.241.141.194

# –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ Docker Hub (—Å–æ–∑–¥–∞–π—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ hub.docker.com)
docker login

# –í–≤–µ–¥–∏—Ç–µ –≤–∞—à username –∏ password –æ—Ç Docker Hub
```

–ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ª–∏–º–∏—Ç —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –¥–æ 200 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ 6 —á–∞—Å–æ–≤.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π registry

–ò–∑–º–µ–Ω–∏—Ç–µ Dockerfile –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–≥–æ registry (–Ω–∞–ø—Ä–∏–º–µ—Ä, GitHub Container Registry –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à).

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 4: –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑—ã –ª–æ–∫–∞–ª—å–Ω–æ –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:

```bash
# –°–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑—ã –ª–æ–∫–∞–ª—å–Ω–æ
docker build -t ritual-api:latest -f apps/api/Dockerfile .
docker build -t ritual-web:latest -f apps/web/Dockerfile .

# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –æ–±—Ä–∞–∑—ã –≤ —Ñ–∞–π–ª—ã
docker save ritual-api:latest | gzip > ritual-api.tar.gz
docker save ritual-web:latest | gzip > ritual-web.tar.gz

# –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp ritual-api.tar.gz ritual-web.tar.gz root@94.241.141.194:/tmp/

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –æ–±—Ä–∞–∑—ã
ssh root@94.241.141.194
docker load < /tmp/ritual-api.tar.gz
docker load < /tmp/ritual-web.tar.gz
docker tag ritual-api:latest ritual-app-api:latest
docker tag ritual-web:latest ritual-app-web:latest
```

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 5: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–∂–µ —Å–∫–∞—á–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–∑—ã

–ï—Å–ª–∏ –æ–±—Ä–∞–∑—ã —É–∂–µ –±—ã–ª–∏ —Å–∫–∞—á–∞–Ω—ã —Ä–∞–Ω–µ–µ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö:

```bash
ssh root@94.241.141.194
cd /opt/ritual-app

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞–∫–∏–µ –æ–±—Ä–∞–∑—ã —É–∂–µ –µ—Å—Ç—å
docker images

# –ï—Å–ª–∏ –æ–±—Ä–∞–∑—ã –µ—Å—Ç—å, –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å –±–µ–∑ --no-cache
docker-compose -f docker-compose.production.yml build
docker-compose -f docker-compose.production.yml up -d
```

---

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é)

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ü–æ–¥–æ–∂–¥–∞—Ç—å 10-15 –º–∏–Ω—É—Ç –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å**

```bash
# –ü—Ä–æ—Å—Ç–æ –ø–æ–¥–æ–∂–¥–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞
./deploy.sh production
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –≤ Docker Hub**

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh root@94.241.141.194
docker login  # –í–≤–µ–¥–∏—Ç–µ credentials –æ—Ç hub.docker.com

# –ó–∞—Ç–µ–º —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π
cd /opt/ritual-app
docker-compose -f docker-compose.production.yml build
docker-compose -f docker-compose.production.yml up -d
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è—Ö

–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ `ADMIN_BOT_TOKEN` –∏ `CUSTOMER_BOT_TOKEN` - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ! –û–Ω–∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã –∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –¥–µ–ø–ª–æ–π.

---

## ‚ö†Ô∏è –¢–∞–∫–∂–µ –∏—Å–ø—Ä–∞–≤–∏–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ version

–í `docker-compose.production.yml` –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å —Å—Ç—Ä–æ–∫—É `version: '3.8'` - –æ–Ω–∞ —É—Å—Ç–∞—Ä–µ–ª–∞ –≤ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Docker Compose.

